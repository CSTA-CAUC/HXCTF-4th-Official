
<!DOCTYPE html>

<html lang="zh-cn">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<title>防火墙-路由器学习(1) - l3m0n - 博客园</title>
<link href="./防火墙-路由器学习(1) - l3m0n - 博客园/blog-common.cssv=m_FXmwz3wxZoecUwNEK23PAzc-j9vbX_C6MblJ5ouMc1" rel="stylesheet" type="text/css"/>
<link href="./防火墙-路由器学习(1) - l3m0n - 博客园/bundle-InsideDotNet.cssv=hm5Ncnf1UmSaS2roxKOjrIG9bKc-5gPzmHFjhD4ZWn01" id="MainCss" rel="stylesheet" type="text/css"/>
<link href="./防火墙-路由器学习(1) - l3m0n - 博客园/bundle-InsideDotNet-mobile.cssv=riNccSBaYfFlRjQw4oW6Q_6u5zO0NRZr85vSvhPWcl01" id="mobile-style" media="only screen and (max-width: 768px)" rel="stylesheet" type="text/css"/>
<link href="./防火墙-路由器学习(1) - l3m0n - 博客园/rss" rel="alternate" title="RSS" type="application/rss+xml"/>
<link href="./防火墙-路由器学习(1) - l3m0n - 博客园/rsd.xml" rel="EditURI" title="RSD" type="application/rsd+xml"/>
<link href="./防火墙-路由器学习(1) - l3m0n - 博客园/wlwmanifest.xml" rel="wlwmanifest" type="application/wlwmanifest+xml"/>
<script src="./防火墙-路由器学习(1) - l3m0n - 博客园/jquery.js" type="text/javascript"></script>
<script type="text/javascript">var currentBlogApp = 'iamstudy', cb_enable_mathjax=true;var isLogined=false;</script>
<script src="./防火墙-路由器学习(1) - l3m0n - 博客园/blog-common.jsv=CPv0EEqm9L2aCgolHxaZfVYM6J-Sn5az_FJXbjzgr-o1" type="text/javascript"></script>
</head>
<body>
<a name="top"></a>
<!--done-->
<div id="home">
<div id="header">
<div id="blogTitle">
<div style="display:none"><img alt="谨以此模板祝贺【博客园开发者征途】系列图书《你必须知道的.net》出版发行" src="./防火墙-路由器学习(1) - l3m0n - 博客园/top.gif"/></div>
<a href="http://www.cnblogs.com/iamstudy/" id="lnkBlogLogo"><img alt="返回主页" id="blogLogo" src="./防火墙-路由器学习(1) - l3m0n - 博客园/logo.gif"/></a>
<!--done-->
<h1><a class="headermaintitle" href="http://www.cnblogs.com/iamstudy/" id="Header1_HeaderTitle">l3m0n</a></h1>
<h2></h2>
</div><!--end: blogTitle 博客的标题和副标题 -->
<div id="navigator">
<ul id="navList">
<li></li>
<li><a class="menu" href="http://ing.cnblogs.com/" id="MyLinks1_SpaceLink">闪存</a></li>
<li><a class="menu" href="http://www.cnblogs.com/iamstudy/" id="blog_nav_myhome">首页</a></li>
<li></li>
<li></li>
<li><a class="menu" href="https://i.cnblogs.com/" id="blog_nav_admin" rel="nofollow">管理</a></li>
<li><a class="menu" href="http://www.cnblogs.com/iamstudy/rss" id="blog_nav_rss">订阅</a>
<a class="aHeaderXML" href="http://www.cnblogs.com/iamstudy/rss" id="blog_nav_rss_image"><img alt="订阅" src="./防火墙-路由器学习(1) - l3m0n - 博客园/xml.gif"/></a></li>
</ul>
<div class="clear"></div>
<div class="blogStats">
<div id="blog_stats">
<!--done-->
随笔- 1 
文章- 65 
评论- 17 
</div>
</div><!--end: blogStats -->
</div><!--end: navigator 博客导航栏 -->
</div><!--end: header 头部 -->
<div id="main">
<div id="mainContent">
<div class="forFlow">
<div id="post_detail">
<!--done-->
<div id="topics">
<div class="post">
<h1 class="postTitle">
<a class="postTitle2" href="http://www.cnblogs.com/iamstudy/articles/firewall_route_study_1.html" id="cb_post_title_url">防火墙-路由器学习(1)</a>
</h1>
<div class="clear"></div>
<div class="postBody">
<div class="cnblogs-markdown" id="cnblogs_post_body"><p>上课笔记,先放博客,继续更.</p>
<p>模拟软件: GNS3<br/>
路由器: C3640-JK122.bin<br/>
防火墙: pix802.bin</p>
<h2 id="防火墙">防火墙</h2>
<p>防火墙分为三种: 数据包过滤器、代理过滤器和状态型数据包过滤器<br/>
1、数据包过滤器: 采用TCP/IP数据包过滤器的防火墙通常在传送层 或TCP/IP协议栈的Internet层分析网络数据流<br/>
2、代理过滤器: 它在开放 系统互联(OSI)模型中较高的层次(通常 是OSI模型的4到7层)上检查数据包<br/>
3、状态型数据包过滤器: 综合了前两者的优点,为每个穿过防火墙建立的会话保持完整地会话状态信息</p>
<p>PIX有四种管理访问模式<br/>
1、非特权模式,刚开始访问pix就是这种,通常也被称为用户可执行模式,显示的提示符是&gt;<br/>
2、特权模式,这种模式可以修改配置,显示的提示符是#</p>
<h3 id="基本命令">基本命令</h3>
<p>非特权命令:</p>
<pre><code>  clear       Reset functions
  enable      Turn on privileged commands
  exit        Exit from the EXEC
  help        Interactive help for commands
  login       Log in as a particular user
  logout      Exit from the EXEC
  ping        Send echo messages
  quit        Exit from the EXEC
  show        Show running system information
  traceroute  Trace route to destination</code></pre>
<p>show命令</p>
<pre><code>pixfirewall&gt; show ?

  checksum  Display configuration information cryptochecksum
  curpriv   Display current privilege level
  flash:    Display information about flash: file system
  history   Display the session command history
  version   Display system software version
  |         Output modifiers
  &lt;cr&gt;</code></pre>
<p>特权模式命令:<br/>
1、设置口令<br/>
enable password password</p>
<p>2、让用户可以查看关于接口的信息<br/>
show interface</p>
<pre><code>—line protocol up(线路协议可用)——说明已将一条工作电
缆插入到了网络接口中(第一层连通性)。
—line protocol down(线路协议不可用)——说明被插入到网 络接口中的电缆不正确,或者没有将电缆插入到接口中。
—MAC address(MAC地址)——在输出中显示MAC地址。 MAC出现在显示“地址是(address is)”之后。
—IP address(IP地址)——显示分配的IP地址。
—subnet mask(子网掩码)——显示子网掩码。
—MTU(最大传输单元)——数据包可以通过网络被传送的最 大尺寸,以字节为单位。
—lost carrier——在传送期间,载波信号丢失的次数。</code></pre>
<p>3、内存查看<br/>
show memory，该命令显示PIX防火墙的最大物理存储器 和当前可用存储器的汇总信息。</p>
<p>4、版本信息查看<br/>
show version</p>
<p>5、显示翻译槽位信息<br/>
show xlate，该命令显示了翻译槽位信息。这些信息是为 通过PIX防火墙建立的会话进行地址翻译所分配的IP地址。</p>
<p>进入配置模式的命令:<br/>
进入特权后还需要执行config t或者configure terminal<br/>
1、修改配置<br/>
configure terminal<br/>
如果我们想交互式地改变PIX防火墙 的配置,应采用命令configure terminal。任何添加的配置参 数都将被归并到当前运行的配置当中。当对PIX防火墙进行 配置修改时,修改会立刻生效,并被保存到RAM里正在运行 的配置当中。</p>
<p>2、设置口令<br/>
enable password test123</p>
<p>3、展示配置<br/>
show configure(或者是show config),这条命令在终端上显示存储在Flash存 储器中的配置文件(有时被称为“启动配置(start configuration)”)。因为Flash是非易失性的,所以如果PIX 发生掉电或重启动,存储在那里的配置不会被丢失。启动配 置是在系统启动期间,PIX防火墙将装载到RAM中的配置</p>
<p>4、配置文件操作<br/>
write terminal，显示当前运行的配置<br/>
write net，将当前运行的配置文件存储到TFTP服务器上<br/>
write erase，这条命令清除位于Flash存储器中的配置文件<br/>
write floppy，这条命令将运行配置存储到磁盘上。</p>
<h3 id="升级防火墙">升级防火墙</h3>
<p>步骤1:执行copy tftp flash命令,并在被提示 时,输入适当的信息。<br/>
步骤2:输入TFTP服务器的IP地址。<br/>
步骤3:输入源文件名称(PIX OS.bin文件)。<br/>
步骤4:输入yes以继续。</p>
<h3 id="配置防火墙">配置防火墙</h3>
<p>ASA安全级别，100是最高级，0是最低。<br/>
这些安全级别可以被分配给连接PIX防火墙的边界接口。通常,将这些边界接口中的一个连接到作为 停火区(DMZ)的一个网络。DMZ是一台设备或网络,对 于来自不被信任环境中的用户来说,DMZ通常是可以被访问 的。DMZ是一个隔离的区域,是从内部被信任的环境中隔离出来的</p>
<p>nameif、interface、ip address、nat、global、route<br/>
基本命令：<br/>
1、nameif<br/>
为PIX防火墙上的每个接口分配一个 名字,并指定它的安全级别<br/>
语法:nameif hardware_id if_name security_level<br/>
hardware_id:指定一个边界接口,以及它在 PIX防火墙上的物理位置<br/>
if_name:为物理边界接口指定一个名字,缺省情况下,借口e1的名字是inside(内部接口),接口e0的名字是outside(外部接口)<br/>
security_level:为边界接口指定安全级别。输入取值范围为1~99的安全级别</p>
<p>2、interface命令<br/>
用以确定硬件类型,设置硬件速度,并启用接口<br/>
语法:interface hardware_id hardware_speed [shutdown]<br/>
例如:</p>
<pre><code>interface ethernet0 10baset shutdown
interface ethernet1 10baset shutdown
interface ethernet0 10baset
interface ethernet1 10baset</code></pre>
<p>3、ip address命令<br/>
PIX防火墙上的每个接口都必须用一个IP地址进行配置。<br/>
语法:ip address ip_name ip_address [netmask]<br/>
ip_name:描述了这个接口。这个名字是由用户指定的,而且必须被用于所有未来的配置中,以提供对这个接口的引用。<br/>
ip_address:为接口分配的IP地址。<br/>
netmask:如果没有指定网络掩码,将采用“有类别(classful)”的网络掩码——A类255.0.0.0 B类255.255.0.0 C类255.255.255.0</p>
<p>4、nat命令<br/>
网络地址翻译(NAT)让用户能够保持内部IP地址对于外部网络是未知的。nat命令需要完成的工作是,在数据包被转发到外部网络之前,将内部未经 注册的IP地址(这些地址不具有全球唯一性)翻译 成经过注册的、全球接受的IP地址。除了nat 0以 外,nat命令总是与global命令一起使用。<br/>
语法:nat (if_name) nat_id local_ip [netmask]<br/>
例如:<br/>
nat 1 0.0.0.0 0.0.0.0命令,允许所有的内部<br/>
(if_name):描述将使用全局地址的内部网络接 口名字。数据将通过在global命令中指定的接口, 离开PIX。<br/>
nat_id :标识全局地址池,并使它与其相应 global命令相匹配。<br/>
local_ip:在内部网络上,分配给设备的IP地址。可以 使用0.0.0.0,来允许所有的向外连接使用来自全局 池中IP地址进行翻译。<br/>
netmask:本地IP地址的网络掩码。<br/>
小技巧: 在配置改命令的时候，可以用0来代替0.0.0.0</p>
<p>5、global命令(使用nat就必须要设置它来定义翻译ip地址池)<br/>
global (if_name) nat_id ip_address-ip_address [netmark global_mask]<br/>
(if_name)：表示外网接口名称，一般为outside。<br/>
nat_id：建立的地址池标识(nat要引用)。<br/>
ip_address-ip_address：表示一段ip地址范围。<br/>
[netmarkglobal_mask]：表示全局ip地址的网络掩码。</p>
<p>删除全局表项：no global [outside] 1 192.168.1.10-192.168.1.254 netmask 255.255.0.0</p>
<p>6、route命令<br/>
route命令为接口定义一条静态路由。route命令语句可以具有<br/>
一个具有的目的地,或者可以产生一条缺省的静态路由。 语法:route if_name ip_addr ess netmask gateway_ip [metric]<br/>
其中,if_name:描述内部或外部网络接口的名字。数据将通 过这个接口离开PIX。<br/>
ip_address:描述目的地(内部或外部)网络IP地址。用 0.0.0.0指定缺省路由(所有的目标网络)。可以将IP地址 0.0.0.0简写为0。<br/>
netmask:指定应用于ip_address的网络掩码。用0.0.0.0指定 一条缺省路由。可以将网络掩码0.0.0.0简写为0。设置一条 路由是一种比较常见的情况。<br/>
gateway_ip:指定网关路由器的IP地址(这条路由的下一跳地 址)。<br/>
metric:制定到gateway_ip的跳数。如果我们不能确定,就输 入1。我们的WAN管理员可以提供这项信息,或者我们可以 用traceroute命令得到跳数。如果不指定度量值(metric), 缺省是1。</p>
</div><div id="MySignature"></div>
<div class="clear"></div>
<div id="blog_post_info_block">
<div id="BlogPostCategory"></div>
<div id="EntryTag"></div>
<div id="blog_post_info">
</div>
<div class="clear"></div>
<div id="post_next_prev"></div>
</div>
</div>
<div class="postDesc">posted @ <span id="post-date">2017-04-12 08:57</span> <a href="http://www.cnblogs.com/iamstudy/">l3m0n</a> 阅读(<span id="post_view_count">...</span>) 评论(<span id="post_comment_count">...</span>)  <a href="https://i.cnblogs.com/EditArticles.aspx?postid=6697504" rel="nofollow">编辑</a> <a href="#" onclick="AddToWz(6697504);return false;">收藏</a></div>
</div>
<script src="./防火墙-路由器学习(1) - l3m0n - 博客园/highlight.min.jsid=20160127"></script><script>markdown_highlight();</script><script type="text/javascript">var allowComments=true,cb_blogId=242399,cb_entryId=6697504,cb_blogApp=currentBlogApp,cb_blogUserGuid='f80873d6-234e-e511-b908-9dcfd8948a71',cb_entryCreatedDate='2017/4/12 8:57:00';loadViewCount(cb_entryId);</script>
</div><!--end: topics 文章、评论容器-->
</div><a name="!comments"></a><div id="blog-comments-placeholder"></div><script type="text/javascript">var commentManager = new blogCommentManager();commentManager.renderComments(0);</script>
<div class="commentform" id="comment_form">
<a name="commentform"></a>
<div id="divCommentShow"></div>
<div id="comment_nav"><span id="span_refresh_tips"></span><a clientidmode="Static" href="javascript:void(0);" id="lnk_RefreshComments" onclick="return RefreshCommentList();" runat="server">刷新评论</a><a href="#" onclick="return RefreshPage();">刷新页面</a><a href="#top">返回顶部</a></div>
<div id="comment_form_container"></div>
<div class="ad_text_commentbox" id="ad_text_under_commentbox"></div>
<div id="ad_t2"></div>
<div id="opt_under_post"></div>
<div class="c_ad_block" id="cnblogs_c1"></div>
<div id="under_post_news"></div>
<div class="c_ad_block" id="cnblogs_c2"></div>
<div id="under_post_kb"></div>
<div class="c_ad_block" id="HistoryToday"></div>
<script type="text/javascript">
    fixPostBody();
    setTimeout(function () { incrementViewCount(cb_entryId); }, 50);
    deliverAdT2();
    deliverAdC1();
    deliverAdC2();    
    loadNewsAndKb();
    loadBlogSignature();
    LoadPostInfoBlock(cb_blogId, cb_entryId, cb_blogApp, cb_blogUserGuid);
    GetPrevNextPost(cb_entryId, cb_blogId, cb_entryCreatedDate);
    loadOptUnderPost();
    GetHistoryToday(cb_blogId, cb_blogApp, cb_entryCreatedDate);   
</script>
</div>
</div><!--end: forFlow -->
</div><!--end: mainContent 主体内容容器-->
<div id="sideBar">
<div id="sideBarMain">
<!--done-->
<div class="newsItem">
<h3 class="catListTitle">公告</h3>
<div id="blog-news"></div><script type="text/javascript">loadBlogNews();</script>
</div>
<div id="calendar"><div id="blog-calendar" style="display:none"></div><script type="text/javascript">loadBlogDefaultCalendar();</script></div>
<div id="leftcontentcontainer">
<div id="blog-sidecolumn"></div><script type="text/javascript">loadBlogSideColumn();</script>
</div>
</div><!--end: sideBarMain -->
</div><!--end: sideBar 侧边栏容器 -->
<div class="clear"></div>
<div class="clear"></div>
</div><!--end: main -->
<div class="clear"></div>
<div id="footer">
<!--done-->
Copyright ©2017 l3m0n 谨以此模板祝贺【博客园开发者征途】系列图书之《你必须知道的.NET》出版发行
	</div><!--end: footer -->
</div><!--end: home 自定义的最大容器 -->
<!--PageEndHtml Block Begin-->
<div align="center" id="something">
<script language="javascript" src="./防火墙-路由器学习(1) - l3m0n - 博客园/18599866.js" type="text/javascript"></script>
<noscript><a href="//www.51.la/?18599866" target="_blank"><img alt="我要啦免费统计" src="//img.users.51.la/18599866.asp" style="border:none"/></a></noscript>
<script language="javascript" src="./防火墙-路由器学习(1) - l3m0n - 博客园/id=18599866&amp;mb=3" type="text/javascript"></script>
</div>
<script>
$('#footer').html('Copyright &copy;2017 Syclover-l3m0n');
console.log('Hello,welcome to my blog!!!\n                  --------l3m0n');
window.onload=function(){
  $('#q').css({'width':'100px'});
  $('#under_post_news').html('');
  $('#under_post_kb').html('');
  $('#ad_t2').html('');
  $('#cnblogs_c1').html('');
  $('#cnblogs_c2').html('');
}
</script>
<!--PageEndHtml Block End-->
</body>
</html>
