<!DOCTYPE html>

<html lang="zh-cn">
<head>
<title>计算机是如何启动的？ | wonderkun's|blog</title>
<link href="./计算机是如何启动的？  wonderkun'sblog/style.css" rel="stylesheet"/>
<link href="./计算机是如何启动的？  wonderkun'sblog/style.opacity.css" rel="stylesheet"/>
<link href="./计算机是如何启动的？  wonderkun'sblog/11" rel="profile">
<link href="http://wonderkun.cc/index.html/xmlrpc.php" rel="pingback">
<link href="" rel="shortcut icon" type="image/x-icon"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible"/>
<meta content="dimpurr" name="author"/>
<meta content="wonderkun's|blog" name="application-name"/>
<meta charset="utf-8"/>
<link href="./计算机是如何启动的？  wonderkun'sblog/index.html" rel="home"/>
<link href="./计算机是如何启动的？  wonderkun'sblog/feed=rss2" rel="alternate" title="RSS 2.0" type="application/rss+xml"/>
<link href="./计算机是如何启动的？  wonderkun'sblog/feed=rss" rel="alternate" title="RSS 1.0" type="application/rdf+xml"/>
<link href="./计算机是如何启动的？  wonderkun'sblog/feed=atom" rel="alternate" title="ATOM 1.0" type="application/atom+xml"/>
<!--[if lt IE 9]>
<script src="http://wonderkun.cc/index.html/wp-content/themes/clearision/js/html5.js" type="text/javascript"></script>
<![endif]-->
<link href="./计算机是如何启动的？  wonderkun'sblog/feed=rss2&amp;p=365" rel="alternate" title="wonderkun's|blog » 计算机是如何启动的？评论Feed" type="application/rss+xml"/>
<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/wonderkun.cc\/index.html\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.5.9"}};
			!function(a,b,c){function d(a){var c,d,e,f=b.createElement("canvas"),g=f.getContext&&f.getContext("2d"),h=String.fromCharCode;if(!g||!g.fillText)return!1;switch(g.textBaseline="top",g.font="600 32px Arial",a){case"flag":return g.fillText(h(55356,56806,55356,56826),0,0),f.toDataURL().length>3e3;case"diversity":return g.fillText(h(55356,57221),0,0),c=g.getImageData(16,16,1,1).data,d=c[0]+","+c[1]+","+c[2]+","+c[3],g.fillText(h(55356,57221,55356,57343),0,0),c=g.getImageData(16,16,1,1).data,e=c[0]+","+c[1]+","+c[2]+","+c[3],d!==e;case"simple":return g.fillText(h(55357,56835),0,0),0!==g.getImageData(16,16,1,1).data[0];case"unicode8":return g.fillText(h(55356,57135),0,0),0!==g.getImageData(16,16,1,1).data[0]}return!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g,h,i;for(i=Array("simple","flag","unicode8","diversity"),c.supports={everything:!0,everythingExceptFlag:!0},h=0;h<i.length;h++)c.supports[i[h]]=d(i[h]),c.supports.everything=c.supports.everything&&c.supports[i[h]],"flag"!==i[h]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[i[h]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link href="./计算机是如何启动的？  wonderkun'sblog/rest_route=" rel="https://api.w.org/"/>
<link href="http://wonderkun.cc/index.html/xmlrpc.php?rsd" rel="EditURI" title="RSD" type="application/rsd+xml"/>
<link href="./计算机是如何启动的？  wonderkun'sblog/wlwmanifest.xml" rel="wlwmanifest" type="application/wlwmanifest+xml"/>
<link href="./计算机是如何启动的？  wonderkun'sblog/p=362" rel="prev" title="用python的Tkinter实现一个简单的计算器"/>
<link href="./计算机是如何启动的？  wonderkun'sblog/p=368" rel="next" title="作为一个网络安全人 ，你必须知道的网站。"/>
<meta content="WordPress 4.5.9" name="generator"/>
<link href="./计算机是如何启动的？  wonderkun'sblog/p=365" rel="canonical"/>
<link href="./计算机是如何启动的？  wonderkun'sblog/p=365" rel="shortlink"/>
<link href="./计算机是如何启动的？  wonderkun'sblog/rest_route=%2Foembed%2F1.0%2Fembed&amp;url=http%3A%2F%2Fwonderkun.cc%2Findex.html%2F%3Fp%3D365" rel="alternate" type="application/json+oembed"/>
<link href="./计算机是如何启动的？  wonderkun'sblog/rest_route=%2Foembed%2F1.0%2Fembed&amp;url=http%3A%2F%2Fwonderkun.cc%2Findex.html%2F%3Fp%3D365&amp;format=xml" rel="alternate" type="text/xml+oembed"/>
<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>
<style id="syntaxhighlighteranchor" type="text/css"></style>
</link></link></head>
<body class="single single-post postid-365 single-format-standard">
<div id="page">
<hgroup id="ctn_header">
<div id="title">
<h1 id="site-title"><span><a href="http://wonderkun.cc/index.html/" rel="home" title="wonderkun's|blog">wonderkun's|blog</a></span></h1>
<h2 id="site-description">share with you!!</h2>
</div>
<div id="title_r">
<a href="http://wonderkun.cc" target="_blank" title="个人页"><button class="tr_profile"></button></a>
<a href="http://user.qzone.qq.com/729173164" target="_blank" title="QQ"><button class="tr_qqw"></button></a>
<a href="http://github.com/wonderkun" target="_blank" title="Github"><button class="tr_github"></button></a>
<a href="http://wonderkun.cc/index.html/?feed=rss2" target="_blank"><button id="tr_rss"></button></a>
<a href="http://wonderkun.cc/index.html/wp-admin/" target="_blank"><button id="tr_admin"></button></a>
<span id="tr_clear"></span>
<form action="http://wonderkun.cc/index.html/" id="tr_s_f" method="get">
<input id="s" name="s" placeholder="" size="10" type="text"/>
</form>
</div>
<div class="clearfix"></div>
</hgroup>
<div id="float">
<a href="http://wonderkun.cc/index.html/" rel="home" title="wonderkun's|blog"><img alt="wonderkun's|blog" id="logo" src="./计算机是如何启动的？  wonderkun'sblog/09451H922-11.jpg" title="wonderkun's|blog"/></a>
<nav id="nav" role="navigation">
<div class="menu-%e4%b8%bb%e8%8f%9c%e5%8d%95-container"><ul class="menu" id="menu-%e4%b8%bb%e8%8f%9c%e5%8d%95"><li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-18" id="menu-item-18"><a href="http://wonderkun.cc/index.html/?cat=1">hack_ctf</a></li>
<li class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-19" id="menu-item-19"><a href="http://wonderkun.cc/index.html/?cat=6">linux</a></li>
<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-20" id="menu-item-20"><a href="http://wonderkun.cc/index.html/?cat=7">代码控</a></li>
<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-21" id="menu-item-21"><a href="http://wonderkun.cc/index.html/?cat=8">技术宅</a></li>
</ul></div></nav>
<nav id="next" role="sencond_navigation">
<div class="menu-%e8%be%85%e5%8a%a9%e8%8f%9c%e5%8d%95-container"><ul class="menu" id="menu-%e8%be%85%e5%8a%a9%e8%8f%9c%e5%8d%95"><li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-23" id="menu-item-23"><a href="http://wonderkun.cc/index.html/?cat=9">名站推荐</a></li>
<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-24" id="menu-item-24"><a href="http://wonderkun.cc/index.html/?cat=10">我们的故事</a></li>
<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-25" id="menu-item-25"><a href="http://wonderkun.cc/index.html/?cat=11">技术共享</a></li>
<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-26" id="menu-item-26"><a href="http://wonderkun.cc/index.html/?cat=12">资源分享</a></li>
</ul></div></nav>
</div>
<div id="ctn">
<div id="content">
<article class="post_ctn">
<hgroup class="post_hctn">
<div class="post_time">
<div class="post_t_d">04/20</div>
<div class="post_t_u">15:04</div>
</div>
<div class="post_h_l">
<span class="post_ct"><a href="http://wonderkun.cc/index.html/?cat=6" rel="category">linux</a></span>
<h2 class="post_h"><a href="http://wonderkun.cc/index.html/?p=365">计算机是如何启动的？</a></h2>
<div class="post_tag">
<span class="post_c"><a class="wp-postviews">wonderkun 撰写</a></span>
<span class="post_c"><a href="http://wonderkun.cc/index.html/?p=365#respond">无回复</a></span>
<span class="post_c"></span>
</div>
</div>
</hgroup>
<div class="post_t"><p><strong>觉得deepin很好玩 ，就安装了一个，可以电脑启动默认先进grub，加载linux的启动引到，无法默认加载windows启动引导，研究的过程中发现下面 一篇好文章，分享一下</strong><br/>
从打开电源到开始操作，计算机的启动是一个非常复杂的过程。</p>
<p>我一直搞不清楚，这个过程到底是怎么回事，只看见屏幕快速滚动各种提示…… 这几天，我查了一些资料，试图搞懂它。下面就是我整理的笔记。<br/>
零、boot的含义<br/>
先问一个问题，”启动”用英语怎么说？<br/>
回答是boot。可是，boot原来的意思是靴子，”启动”与靴子有什么关系呢？ 原来，这里的boot是bootstrap（鞋带）的缩写，它来自一句谚语：<br/>
“pull oneself up by one’s bootstraps”<br/>
字面意思是”拽着鞋带把自己拉起来”，这当然是不可能的事情。最早的时候，工程师们用它来比喻，计算机启动是一个很矛盾的过程：必须先运行程序，然后计算机才能启动，但是计算机不启动就无法运行程序！<br/>
早期真的是这样，必须想尽各种办法，把一小段程序装进内存，然后计算机才能正常运行。所以，工程师们把这个过程叫做”拉鞋带”，久而久之就简称为boot了。<br/>
计算机的整个启动过程分成四个阶段。<br/>
一、第一阶段：BIOS<br/>
上个世纪70年代初，”只读内存”（read-only memory，缩写为ROM）发明，开机程序被刷入ROM芯片，计算机通电后，第一件事就是读取它。</p>
<p>这块芯片里的程序叫做”基本輸出輸入系統”（Basic Input/Output System），简称为BIOS。<br/>
1.1 硬件自检<br/>
BIOS程序首先检查，计算机硬件能否满足运行的基本条件，这叫做”硬件自检”（Power-On Self-Test），缩写为POST。<br/>
如果硬件出现问题，主板会发出不同含义的蜂鸣，启动中止。如果没有问题，屏幕就会显示出CPU、内存、硬盘等信息。</p>
<p>1.2 启动顺序<br/>
硬件自检完成后，BIOS把控制权转交给下一阶段的启动程序。<br/>
这时，BIOS需要知道，”下一阶段的启动程序”具体存放在哪一个设备。也就是说，BIOS需要有一个外部储存设备的排序，排在前面的设备就是优先转交控制权的设备。这种排序叫做”启动顺序”（Boot Sequence）。<br/>
打开BIOS的操作界面，里面有一项就是”设定启动顺序”。</p>
<p>二、第二阶段：主引导记录<br/>
BIOS按照”启动顺序”，把控制权转交给排在第一位的储存设备。<br/>
这时，计算机读取该设备的第一个扇区，也就是读取最前面的512个字节。如果这512个字节的最后两个字节是0x55和0xAA，表明这个设备可以用于启动；如果不是，表明设备不能用于启动，控制权于是被转交给”启动顺序”中的下一个设备。<br/>
这最前面的512个字节，就叫做”主引导记录”（Master boot record，缩写为MBR）。<br/>
2.1 主引导记录的结构<br/>
“主引导记录”只有512个字节，放不了太多东西。它的主要作用是，告诉计算机到硬盘的哪一个位置去找操作系统。<br/>
主引导记录由三个部分组成：<br/>
（1） 第1-446字节：调用操作系统的机器码。<br/>
（2） 第447-510字节：分区表（Partition table）。<br/>
（3） 第511-512字节：主引导记录签名（0x55和0xAA）。<br/>
其中，第二部分”分区表”的作用，是将硬盘分成若干个区。<br/>
2.2 分区表<br/>
硬盘分区有很多好处。考虑到每个区可以安装不同的操作系统，”主引导记录”因此必须知道将控制权转交给哪个区。<br/>
分区表的长度只有64个字节，里面又分成四项，每项16个字节。所以，一个硬盘最多只能分四个一级分区，又叫做”主分区”。<br/>
每个主分区的16个字节，由6个部分组成：<br/>
（1） 第1个字节：如果为0x80，就表示该主分区是激活分区，控制权要转交给这个分区。四个主分区里面只能有一个是激活的。<br/>
（2） 第2-4个字节：主分区第一个扇区的物理位置（柱面、磁头、扇区号等等）。<br/>
（3） 第5个字节：主分区类型。<br/>
（4） 第6-8个字节：主分区最后一个扇区的物理位置。<br/>
（5） 第9-12字节：该主分区第一个扇区的逻辑地址。<br/>
（6） 第13-16字节：主分区的扇区总数。<br/>
最后的四个字节（”主分区的扇区总数”），决定了这个主分区的长度。也就是说，一个主分区的扇区总数最多不超过2的32次方。<br/>
如果每个扇区为512个字节，就意味着单个分区最大不超过2TB。再考虑到扇区的逻辑地址也是32位，所以单个硬盘可利用的空间最大也不超过2TB。如果想使用更大的硬盘，只有2个方法：一是提高每个扇区的字节数，二是增加扇区总数。<br/>
三、第三阶段：硬盘启动<br/>
这时，计算机的控制权就要转交给硬盘的某个分区了，这里又分成三种情况。<br/>
3.1 情况A：卷引导记录<br/>
上一节提到，四个主分区里面，只有一个是激活的。计算机会读取激活分区的第一个扇区，叫做”卷引导记录”（Volume boot record，缩写为VBR）。<br/>
“卷引导记录”的主要作用是，告诉计算机，操作系统在这个分区里的位置。然后，计算机就会加载操作系统了。<br/>
3.2 情况B：扩展分区和逻辑分区<br/>
随着硬盘越来越大，四个主分区已经不够了，需要更多的分区。但是，分区表只有四项，因此规定有且仅有一个区可以被定义成”扩展分区”（Extended partition）。<br/>
所谓”扩展分区”，就是指这个区里面又分成多个区。这种分区里面的分区，就叫做”逻辑分区”（logical partition）。<br/>
计算机先读取扩展分区的第一个扇区，叫做”扩展引导记录”（Extended boot record，缩写为EBR）。它里面也包含一张64字节的分区表，但是最多只有两项（也就是两个逻辑分区）。<br/>
计算机接着读取第二个逻辑分区的第一个扇区，再从里面的分区表中找到第三个逻辑分区的位置，以此类推，直到某个逻辑分区的分区表只包含它自身为止（即只有一个分区项）。因此，扩展分区可以包含无数个逻辑分区。<br/>
但是，似乎很少通过这种方式启动操作系统。如果操作系统确实安装在扩展分区，一般采用下一种方式启动。<br/>
3.3 情况C：启动管理器<br/>
在这种情况下，计算机读取”主引导记录”前面446字节的机器码之后，不再把控制权转交给某一个分区，而是运行事先安装的”启动管理器”（boot loader），由用户选择启动哪一个操作系统。<br/>
Linux环境中，目前最流行的启动管理器是Grub。</p>
<p>四、第四阶段：操作系统<br/>
控制权转交给操作系统后，操作系统的内核首先被载入内存。<br/>
以Linux系统为例，先载入/boot目录下面的kernel。内核加载成功后，第一个运行的程序是/sbin/init。它根据配置文件（Debian系统是/etc/initab）产生init进程。这是Linux启动后的第一个进程，pid进程编号为1，其他进程都是它的后代。<br/>
然后，init线程加载系统的各个模块，比如窗口程序和网络程序，直至执行/bin/login程序，跳出登录界面，等待用户输入用户名和密码。<br/>
至此，全部启动过程完成。</p>
<p><strong>原文地址：http://www.ruanyifeng.com/blog/2013/02/booting.html</strong></p>
</div>
<nav id="post_nav">
<span id="p_n_l"><a href="http://wonderkun.cc/index.html/?p=362" rel="prev">← 用python的Tkinter实现一个简单的计算器</a></span>
<span id="p_n_r"><a href="http://wonderkun.cc/index.html/?p=368" rel="next">作为一个网络安全人 ，你必须知道的网站。 →</a></span>
</nav>
<div class="cmt" id="cmt">
<div class="comment-respond" id="respond">
<h3 class="comment-reply-title" id="reply-title"> <small><a href="/index.html/?p=365#respond" id="cancel-comment-reply-link" rel="nofollow" style="display:none;">撤销评论</a></small></h3> <form action="http://wonderkun.cc/index.html/wp-comments-post.php" class="comment-form" id="cmt_form" method="post">
<p class="comment-form-comment"><textarea aria-required="true" cols="45" id="comment" name="comment" required="" rows="8"></textarea></p><div id="cmt_form_meta"><input id="author" name="author" placeholder="称呼" required="required" type="text" value=""/>
<input id="email" name="email" placeholder="邮箱" required="required" type="email" value=""/>
<input id="url" name="url" placeholder="站点" type="text" value=""/></div>
<p class="form-submit"><input class="submit" id="cmt_submit" name="submit" type="submit" value="提交"/> <input id="comment_post_ID" name="comment_post_ID" type="hidden" value="365"/>
<input id="comment_parent" name="comment_parent" type="hidden" value="0"/>
</p><p style="display: none;"><input id="akismet_comment_nonce" name="akismet_comment_nonce" type="hidden" value="b9275f22d1"/></p><p style="display: none;"><input id="ak_js" name="ak_js" type="hidden" value="235"/></p> </form>
</div><!-- #respond -->
</div>
</article>
</div>
</div>
<div id="sidebar">
<div class="widget" id="one">
<h2>近期评论</h2><ul id="recentcomments"><li class="recentcomments"><span class="comment-author-link">wonderkun</span>发表在《<a href="http://wonderkun.cc/index.html/?p=585#comment-783">php的随机数的安全性分析</a>》</li><li class="recentcomments"><span class="comment-author-link"><a class="url" href="http://aa" rel="external nofollow">wddee</a></span>发表在《<a href="http://wonderkun.cc/index.html/?p=585#comment-777">php的随机数的安全性分析</a>》</li><li class="recentcomments"><span class="comment-author-link">wonderkun</span>发表在《<a href="http://wonderkun.cc/index.html/?p=585#comment-774">php的随机数的安全性分析</a>》</li><li class="recentcomments"><span class="comment-author-link"><a class="url" href="http://aa" rel="external nofollow">wddee</a></span>发表在《<a href="http://wonderkun.cc/index.html/?p=585#comment-773">php的随机数的安全性分析</a>》</li><li class="recentcomments"><span class="comment-author-link"><a class="url" href="http://rxefekalasu.com" rel="external nofollow">Amberly</a></span>发表在《<a href="http://wonderkun.cc/index.html/?p=585#comment-733">php的随机数的安全性分析</a>》</li><li class="recentcomments"><span class="comment-author-link">wonderkun</span>发表在《<a href="http://wonderkun.cc/index.html/?p=585#comment-724">php的随机数的安全性分析</a>》</li></ul><h2>友情链接</h2>
<ul class="xoxo blogroll">
<li><a href="http://www.bendawang.site" target="_blank">Bendawang</a></li>
<li><a href="http://www.bertramc.cn/" target="_blank">berTrAM</a></li>
<li><a href="http://www.cnblogs.com/iamstudy/">l3m0n</a></li>
<li><a href="http://www.ifuryst.com/" target="_blank">墨麒麟安全实验</a></li>
<li><a href="http://xiaomange.meximas.com/" rel="me" target="_blank">老博客地址</a></li>
</ul>
<h2>好基友</h2>
<ul class="xoxo blogroll">
<li><a href="http://bear2.cn/" rel="friend colleague" target="_blank">pierre94</a></li>
<li><a href="http://range.pw" rel="friend met colleague co-resident" target="_blank">range</a></li>
<li><a href="http://www.yibeizifd.cc/%20%20" target="_blank">yibeizifd</a></li>
<li><a href="http://yichin.url.ph/" rel="friend colleague" target="_blank">yichin</a></li>
</ul>
</div>
<div class="widget" id="two">
</div>
<div class="clearfix"></div>
</div><footer id="footer" role="contentinfo">
<a href="http://dimpurr.com" title="Dimpurr (钉子)">Dimpurr</a>'s 
<a href="http://blog.dimpurr.com/clearision" title="Clearision">Clearision</a><br/>
Powered by <a href="http://wordpress.org/" title="WordPress">WordPress</a>
<script src="./计算机是如何启动的？  wonderkun'sblog/script.js" type="text/javascript"></script>
<script src="./计算机是如何启动的？  wonderkun'sblog/form.jsver=3.1.10" type="text/javascript"></script>
<script src="./计算机是如何启动的？  wonderkun'sblog/wp-embed.min.jsver=4.5.9" type="text/javascript"></script>
</footer>
</div>
</body>
</html>