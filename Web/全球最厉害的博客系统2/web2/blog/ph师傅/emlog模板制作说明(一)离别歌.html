
<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta content="True" name="HandheldFriendly"/>
<meta content="width=device-width, initial-scale=1, maximum-scale=1" name="viewport">
<meta content="phithon的小站，长期存在与分享关于网络安全与各种编程的原创文章。" name="description"/>
<meta content="网络安全,代码审计,信息安全,漏洞挖掘,php,C++,mysql,python" name="keywords"/>
<link href="./emlog模板制作说明(一)  离别歌/favicon.ico" rel="shortcut icon"/>
<link href="./emlog模板制作说明(一)  离别歌/favicon-192x192.png" rel="icon" sizes="192x192" type="image/png"/>
<link href="./emlog模板制作说明(一)  离别歌/apple-touch-icon.png" rel="apple-touch-icon" sizes="180x180"/>
<title>emlog模板制作说明(一) | 离别歌</title>
<link href="./emlog模板制作说明(一)  离别歌/font-awesome.min.css" rel="stylesheet"/>
<link href="./emlog模板制作说明(一)  离别歌/styles.css" rel="stylesheet"/>
<link href="./emlog模板制作说明(一)  离别歌/style.css" rel="stylesheet"/>
<link href="./emlog模板制作说明(一)  离别歌/flexboxgrid.min.css" rel="stylesheet"/>
<link href="./emlog模板制作说明(一)  离别歌/feed" rel="alternate" title="离别歌" type="application/atom+xml">
<script src="./emlog模板制作说明(一)  离别歌/jquery.min.js"></script>
<link href="./emlog模板制作说明(一)  离别歌/code.css" rel="stylesheet"/>
<link href="./emlog模板制作说明(一)  离别歌/button.css" rel="stylesheet"/>
<link href="./emlog模板制作说明(一)  离别歌/pagination.css" rel="stylesheet"/>
<link href="./emlog模板制作说明(一)  离别歌/jquery.fancybox.min.css" rel="stylesheet"/>
</link></meta></head>
<body>
<div id="header-post">
<a class="active" href="#" id="menu-icon"><i class="fa fa-bars fa-lg"></i></a>
<a class="active" href="#" id="menu-icon-tablet"><i class="fa fa-bars fa-lg"></i></a>
<a href="#" id="top-icon-tablet" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a>
<span id="menu" style="visibility: visible">
<span id="nav">
<ul>
<li><a href="/">主页</a></li>
<li><a href="javascript:history.back(-1)">返回</a></li>
</ul>
</span>
<br/>
<span id="actions">
<ul>
<li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i aria-hidden="true" class="fa fa-chevron-up" onmouseout="$('#i-top').toggle();" onmouseover="$('#i-top').toggle();"></i></a></li>
<li><a class="icon" href="#"><i aria-hidden="true" class="fa fa-share-alt" onclick="$('#share').toggle();return false;" onmouseout="$('#i-share').toggle();" onmouseover="$('#i-share').toggle();"></i></a></li>
</ul>
<span class="info" id="i-top" style="display:none;">Back to top</span>
<span class="info" id="i-share" style="display:none;">Share post</span>
</span>
<br/>
<div id="share" style="display: none">
<ul>
<li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3A//www.leavesongs.com/PHP/emlog-templates-begin.html"><i aria-hidden="true" class="fa fa-facebook "></i></a></li>
<li><a class="icon" href="https://twitter.com/share?url=https%3A//www.leavesongs.com/PHP/emlog-templates-begin.html&amp;text=emlog%E6%A8%A1%E6%9D%BF%E5%88%B6%E4%BD%9C%E8%AF%B4%E6%98%8E%28%E4%B8%80%29"><i aria-hidden="true" class="fa fa-twitter "></i></a></li>
<li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3A//www.leavesongs.com/PHP/emlog-templates-begin.html&amp;title=emlog%E6%A8%A1%E6%9D%BF%E5%88%B6%E4%BD%9C%E8%AF%B4%E6%98%8E%28%E4%B8%80%29"><i aria-hidden="true" class="fa fa-linkedin "></i></a></li>
<li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3A//www.leavesongs.com/PHP/emlog-templates-begin.html&amp;is_video=false&amp;description=emlog%E6%A8%A1%E6%9D%BF%E5%88%B6%E4%BD%9C%E8%AF%B4%E6%98%8E%28%E4%B8%80%29"><i aria-hidden="true" class="fa fa-pinterest "></i></a></li>
<li><a class="icon" href="mailto:?subject=emlog%E6%A8%A1%E6%9D%BF%E5%88%B6%E4%BD%9C%E8%AF%B4%E6%98%8E%28%E4%B8%80%29&amp;body=Check out this article: https%3A//www.leavesongs.com/PHP/emlog-templates-begin.html"><i aria-hidden="true" class="fa fa-envelope "></i></a></li>
<li><a class="icon" href="https://getpocket.com/save?url=https%3A//www.leavesongs.com/PHP/emlog-templates-begin.html&amp;title=emlog%E6%A8%A1%E6%9D%BF%E5%88%B6%E4%BD%9C%E8%AF%B4%E6%98%8E%28%E4%B8%80%29"><i aria-hidden="true" class="fa fa-get-pocket "></i></a></li>
<li><a class="icon" href="http://reddit.com/submit?url=https%3A//www.leavesongs.com/PHP/emlog-templates-begin.html&amp;title=emlog%E6%A8%A1%E6%9D%BF%E5%88%B6%E4%BD%9C%E8%AF%B4%E6%98%8E%28%E4%B8%80%29"><i aria-hidden="true" class="fa fa-reddit "></i></a></li>
<li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3A//www.leavesongs.com/PHP/emlog-templates-begin.html&amp;title=emlog%E6%A8%A1%E6%9D%BF%E5%88%B6%E4%BD%9C%E8%AF%B4%E6%98%8E%28%E4%B8%80%29"><i aria-hidden="true" class="fa fa-stumbleupon "></i></a></li>
<li><a class="icon" href="http://digg.com/submit?url=https%3A//www.leavesongs.com/PHP/emlog-templates-begin.html&amp;title=emlog%E6%A8%A1%E6%9D%BF%E5%88%B6%E4%BD%9C%E8%AF%B4%E6%98%8E%28%E4%B8%80%29"><i aria-hidden="true" class="fa fa-digg "></i></a></li>
<li><a class="icon" href="http://www.tumblr.com/share/link?url=https%3A//www.leavesongs.com/PHP/emlog-templates-begin.html&amp;name=emlog%E6%A8%A1%E6%9D%BF%E5%88%B6%E4%BD%9C%E8%AF%B4%E6%98%8E%28%E4%B8%80%29&amp;description="><i aria-hidden="true" class="fa fa-tumblr "></i></a></li>
</ul>
</div>
</span>
</div>
<div class="content index width mx-auto px2 my4">
<article class="post" itemscope="" itemtype="http://schema.org/BlogPosting">
<header>
<h1 class="posttitle" itemprop="name headline">emlog模板制作说明(一)</h1>
<div class="meta">
<span class="author" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<span itemprop="name">Phithon</span>
</span>
<div class="postdate">
<time datetime="2013年10月7日 17:24" itemprop="datePublished">
                    2013 十月 07 17:24
                </time>
</div>
<div class="article-tag">
            阅读：326
            </div>
<div class="article-tag">
<i class="fa fa-bookmark"></i>
<a class="tag-link" href="/sort/PHP">PHP</a>
</div>
<div class="article-tag">
<i class="fa fa-tag"></i>
<a class="tag-link" href="/tag/%E6%A8%A1%E6%9D%BF">模板</a>,
                
                <a class="tag-link" href="/tag/emlog">emlog</a>
</div>
</div>
</header>
<div class="content" itemprop="articleBody">
<p>
	    经过几天的努力，我还是东拼西凑地弄出来一个模板，为我的博客换上新装。
</p>
<p>
	    我的第一块模板，我以后也不太会无聊费劲再做新的板子了。毕竟人力有限，天天都有写不完的代码。
</p>
<p>
	    这里来总结和分享一下emlog模板的架构。
</p>
<hr/>
<p>
	    我之前是读过emlog前台代码的，很简洁优良的MVC架构。其中view部分就是我们的模板。
</p>
<p>
	    首先打开<a href="http://wiki.emlog.net/" target="_blank">http://wiki.emlog.net/</a> ，这是emlog的官方WIKI。不得不吐槽一下官方wiki，一般不更新，而且介绍的很简洁（和他们的代码一样简洁），如果不是我读过emlog的源码，其实很难几天里弄清楚整个模板的架构。
</p>
<p>
	    然后这个放在一边，再在本地搭建一个emlog，要最新版5.1.2。打开其默认的模板目录：content\templates\default，我们可以看到如下文件：
</p>
<p>
	    <a href="https://www.leavesongs.com/content/uploadfile/201310/c0501381140997.jpg" id="ematt:209" target="_blank"><img alt="004.jpg" border="0" height="276" src="./emlog模板制作说明(一)  离别歌/c0501381140997.jpg" title="点击查看原图" width="420"/></a>
</p>
<p>
	    每个文件的具体作用在wiki里都有，我就不再赘述。
</p>
<p>
	    作为一个新手，我们可以先从仿照默认模板开始做起。但首先，我觉得先得做出一个html页面，作为我们网站的原型。
</p>
<p>
	    什么，如何做html页面？我这个博客使用的是一款第三方前端库，但我不建议新手使用。原因有二：
</p>
<p>
	        1.第三方库封装了很多前端代码，你并不知道原理，就算你学会了，充其量也是一个使用者，而不是一个开发者。
</p>
<p>
	        2.第三方库使用很死板（可选择性不高），比如某样式的列表只能用&lt;ul&gt;和&lt;li&gt;来实现，如果用&lt;div&gt;和&lt;a&gt;就做不到。这样做就和emlog默认的一些结构有所冲突，需要修改的地方比较多。
</p>
<p>
	    但是使用第三方库很方便，开发速度也快，十分适合现在的我。
</p>
<p>
	    首先我花了一天的时间规划网站的布局，并写出来一个html首页。基于这个首页，我们就可以将它改造成模板了。
</p>
<p>
	    按照从上往下的顺序，首先新建一个header.php文件。所有的文件头上，我们都要加上如下代码：
</p>
<pre class="brush: php;auto-links: false;">if(!defined('EMLOG_ROOT')) {exit('error!');}</pre>
    这是为了防止该文件被直接访问。
<p>
<br>
</br></p>
<p>
	    这个时候有些人就迷茫了。接下来怎么写？
</p>
<p>
	    别忘了我们有一个很好的导游：默认模板。一旦你不知道你接下来该做什么的时候，看看默认模板怎么写的：
</p>
<pre class="brush: php;auto-links: false;">&lt;?php
/*
Template Name:默认模板
Description:默认模板，简洁优雅 ……
Version:1.2
Author:emlog
Author Url:http://www.emlog.net
Sidebar Amount:1
ForEmlog:5.0.1
*/
if(!defined('EMLOG_ROOT')) {exit('error!');}
require_once View::getView('module');
?&gt;
&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"&gt;
&lt;html xmlns="http://www.w3.org/1999/xhtml"&gt;
&lt;head&gt;
&lt;meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /&gt;
&lt;title&gt;&lt;?php echo $site_title; ?&gt;&lt;/title&gt;
&lt;meta name="keywords" content="&lt;?php echo $site_key; ?&gt;" /&gt;
&lt;meta name="description" content="&lt;?php echo $site_description; ?&gt;" /&gt;
&lt;meta name="generator" content="emlog" /&gt;
&lt;link rel="EditURI" type="application/rsd+xml" title="RSD" href="&lt;?php echo BLOG_URL; ?&gt;xmlrpc.php?rsd" /&gt;
&lt;link rel="wlwmanifest" type="application/wlwmanifest+xml" href="&lt;?php echo BLOG_URL; ?&gt;wlwmanifest.xml" /&gt;
&lt;link rel="alternate" type="application/rss+xml" title="RSS"  href="&lt;?php echo BLOG_URL; ?&gt;rss.php" /&gt;
&lt;link href="&lt;?php echo TEMPLATE_URL; ?&gt;main.css" rel="stylesheet" type="text/css" /&gt;
&lt;script src="&lt;?php echo BLOG_URL; ?&gt;include/lib/js/common_tpl.js" type="text/javascript"&gt;&lt;/script&gt;
&lt;?php doAction('index_head'); ?&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;div id="wrap"&gt;
  &lt;div id="header"&gt;
    &lt;h1&gt;&lt;a href="&lt;?php echo BLOG_URL; ?&gt;"&gt;&lt;?php echo $blogname; ?&gt;&lt;/a&gt;&lt;/h1&gt;
    &lt;h3&gt;&lt;?php echo $bloginfo; ?&gt;&lt;/h3&gt;
  &lt;/div&gt;
  &lt;div id="banner"&gt;&lt;a href="&lt;?php echo BLOG_URL; ?&gt;"&gt;&lt;img src="&lt;?php echo BLOG_URL.Option::get('topimg'); ?&gt;" height="134" width="960" /&gt;&lt;/a&gt;&lt;/div&gt;
  &lt;div id="nav"&gt;&lt;?php blog_navi();?&gt;&lt;/div&gt;
</pre>
    header顾名思义是网站的头部，所以我们从html中把&lt;head&gt;的内容拷贝到header.php里，然后我们还可以把顶部的导航菜单的部分也凡在header.php里。
<p>
<br>
</br></p>
<p>
	    放进来以后我们就开始替换，我们看默认模板的头部，比如&lt;title&gt;&lt;?php echo $site_title; ?&gt;&lt;/title&gt;，title标签里包含着的是博客的浏览器标题。
</p>
<p>
	    有的同学就问，文档里说的这么不清楚，我怎么知道哪个变量代表的意义是什么。这个可以从默认模板里读出来：
</p>
<p>
	    比如&lt;title&gt;中放的$site_title是浏览器标题，而&lt;meta name="keywords" content="&lt;?php echo $site_key; ?&gt;" /&gt;中放的<span>$site_key</span>肯定是标签。其实这些文档里也都有说明。
</p>
<p>
	    我们把这些变量放进他们应该在的位置，就做好了一个header.php。
</p>
</div>
</article>
<div id="reply-list">
<h1>评论</h1>
</div>
<form action="#reply" enctype="multipart/form-data" id="reply" method="post">
<textarea cols="40" id="id_content" name="content" required="" rows="6">
</textarea>
<div class="row">
<div class="col-xs-4">
<input id="id_nickname" maxlength="64" name="nickname" placeholder="昵称" required="" type="text"/>
</div>
<div class="col-xs-4">
<input id="id_email" maxlength="254" name="email" placeholder="邮箱（可留空）" type="text"/>
</div>
<div class="col-xs-4">
<input id="id_url" maxlength="200" name="url" placeholder="链接（可留空）" type="text"/>
</div>
</div>
<div class="row" style="margin-top: 8px"><div class="col-xs-4"><input autocomplete="off" id="id_captcha_1" name="captcha_1" placeholder="验证码" type="text"/> <input id="id_captcha_0" name="captcha_0" type="hidden" value="5aee6e468c5be73047afa5bce9353d2a1f3d4b34"/>
</div><div class="col-xs-4">
<img alt="captcha" class="captcha" height="25" src="./emlog模板制作说明(一)  离别歌/5aee6e468c5be73047afa5bce9353d2a1f3d4b34"/></div></div>
<div class="clearfix"></div>
<input class="ui-button ui-button-sgreen" type="submit" value="提交"/>
<input id="id_archive" name="archive" type="hidden" value="281">
<input id="id_parent" name="parent" type="hidden"/>
<input name="csrfmiddlewaretoken" type="hidden" value="ngqPSzhdUxt2bMIRKFd5rThByFnzh2cPVALlG3tslknrbr66yWHP0xjGHJQH0w1Z"/>
</input></form>
</div>
<footer id="footer">
<div class="footer-left">
    Copyright © 2017 Powered by talkbook
  </div>
<div class="footer-right">
<nav>
<ul>
<li><a href="/">首页</a></li>
<li><a href="http://weibo.com/101yx" target="_blank">微博</a></li>
<li><a href="https://github.com/phith0n" target="_blank">项目</a></li>
<li><a href="/template/change/">更换模板</a></li>
</ul>
</nav>
</div>
</footer>
<script src="./emlog模板制作说明(一)  离别歌/main.js"></script>
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?ad9ab5e37c2811b9f0979e46123fc898";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>
<script src="./emlog模板制作说明(一)  离别歌/jquery.fancybox.pack.js"></script>
<script>
$(document).ready(function () {
    $("article a").each(function (i, e) {
        if(e.host != 'www.leavesongs.com') {
            e.target = '_blank';
        }
    });
    $("article img").each(function (i, e) {
        if(e.parentNode.tagName.toUpperCase() != 'A') {
            $(e).wrap('<a href="'+escapeHtml(e.src)+'" class="fancybox"></a>');
        } else {
            $(e.parentNode).addClass('fancybox');
        }
    });
    $('.fancybox').fancybox();
})
</script>
</body>
</html>